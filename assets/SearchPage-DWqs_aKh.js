import{A as e,C as t,D as n,E as r,F as i,G as a,I as o,K as s,L as c,M as l,N as u,O as d,P as f,R as p,S as m,T as h,U as g,V as _,W as v,b as y,g as b,h as x,j as S,k as C,n as w,t as T,w as E,x as D,y as O,z as k}from"./index-DhNMmnQS.js";var A=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21%2038C30.3888%2038%2038%2030.3888%2038%2021C38%2011.6112%2030.3888%204%2021%204C11.6112%204%204%2011.6112%204%2021C4%2030.3888%2011.6112%2038%2021%2038Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M26.657%2014.3431C25.2093%2012.8954%2023.2093%2012%2021.0001%2012C18.791%2012%2016.791%2012.8954%2015.3433%2014.3431'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.2216%2033.2217L41.7069%2041.707'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e`,ee=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M25%2040H7C5.34315%2040%204%2038.6569%204%2037V11C4%209.34315%205.34315%208%207%208H41C42.6569%208%2044%209.34315%2044%2011V24.9412'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2011C4%209.34315%205.34315%208%207%208H41C42.6569%208%2044%209.34315%2044%2011V20H4V11Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'/%3e%3cpath%20d='M32%2035H44'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38%2029V41'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20r='2'%20transform='matrix(-1.31134e-07%20-1%20-1%201.31134e-07%2010%2014)'%20fill='%23000'/%3e%3ccircle%20r='2'%20transform='matrix(-1.31134e-07%20-1%20-1%201.31134e-07%2016%2014)'%20fill='%23000'/%3e%3c/svg%3e`,te=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M40%2033V42C40%2043.1046%2039.1046%2044%2038%2044H31.5'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M40%2016V6C40%204.89543%2039.1046%204%2038%204H10C8.89543%204%208%204.89543%208%206V42C8%2043.1046%208.89543%2044%2010%2044H16'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16%2016H30'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3cpath%20d='M23%2044L40%2023'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3cpath%20d='M16%2024H24'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3c/svg%3e`,j=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%2010V44H39V10H9Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M20%2020V33'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M28%2020V33'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2010H44'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16%2010L19.289%204H28.7771L32%2010H16Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3c/svg%3e`,M={class:`bookmark-grid-container`},N={class:`bookmark-item`},ne=[`src`],P=[`onDragstart`,`onDragover`,`onDrop`],F={class:`bookmark-content`},I=[`onClick`,`onContextmenu`],L=[`src`],R={key:1,class:`bookmark-icon`},re={class:`bookmark-name`},ie={key:1,class:`bookmark-content`},z=[`onClick`,`onContextmenu`],ae=[`src`],B={key:1,class:`bookmark-icon`},V={class:`bookmark-name`},oe={class:`group-tabs`},se={class:`group-tabs-inner glass-white menu-container`},ce=[`onClick`],H=w(C({__name:`BookmarkGrid`,props:{bookmarks:{},groups:{},currentGroup:{}},emits:[`add`,`edit`,`delete`,`open`,`reorder`,`switch-group`],setup(i,{emit:o}){let p=i,h=o,y=m(()=>{if(p.groups&&p.groups.length>0)return p.groups;let e=new Set;return e.add(`默认`),p.bookmarks.forEach(t=>{t.group&&t.group.trim()&&e.add(t.group)}),Array.from(e)}),C=_(p.currentGroup||`默认`),w=_(!1),T=_(null),O=_(0),k=_(0),A=_(null),H=[{label:`编辑`,key:`edit`,icon:()=>e(`img`,{src:te,style:{width:`16px`,height:`16px`}})},{label:`删除`,key:`delete`,icon:()=>e(`img`,{src:j,style:{width:`16px`,height:`16px`}}),props:{class:`danger`}}],U=_(!0),W=_(!0),G=()=>{let e=A.value?.querySelector(`.bookmark-grid`);e&&(U.value=e.scrollTop===0,W.value=e.scrollTop+e.clientHeight>=e.scrollHeight-1)},K=m(()=>{let e=[];return U.value||e.push(`linear-gradient(to bottom, transparent 0%, black 12px)`),W.value||e.push(`linear-gradient(to top, transparent 0%, black 12px)`),e.length===0?{}:{maskImage:e.join(`, `),WebkitMaskImage:e.join(`, `),maskComposite:`intersect`,WebkitMaskComposite:`intersect`}}),q=_(null),J=_(null),le=(e,t)=>{q.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t.toString()))},ue=(e,t)=>{e.preventDefault(),q.value!==null&&q.value!==t&&(J.value=t)},de=()=>{J.value=null},Y=()=>{q.value=null,J.value=null},fe=(e,t)=>{if(e.preventDefault(),q.value===null||q.value===t){Y();return}let n=[...p.bookmarks],r=n.filter(e=>C.value===`默认`?!e.group||!e.group.trim():e.group===C.value),i=r[q.value];if(!i){Y();return}r.splice(q.value,1),r.splice(t,0,i);let a=0;n.forEach((e,t)=>{(C.value===`默认`?!e.group||!e.group.trim():e.group===C.value)&&r[a]&&(n[t]=r[a],a++)}),h(`reorder`,n),Y()},pe=e=>{C.value=e,h(`switch-group`,e)},me=m(()=>C.value===`默认`||C.value===`全部`?p.bookmarks.filter(e=>!e.group||!e.group.trim()):p.bookmarks.filter(e=>e.group===C.value)),he=()=>{h(`add`)},ge=e=>{h(`edit`,e),Q()},_e=e=>{h(`delete`,e),Q()},X=e=>{h(`open`,e)},Z=(e,t)=>{e.preventDefault(),e.stopPropagation(),T.value=t,O.value=e.clientX,k.value=e.clientY,w.value=!0},Q=()=>{w.value=!1,T.value=null},ve=e=>{let t=T.value;t&&(e===`edit`?ge(t):e===`delete`&&t.id&&_e(t.id),Q())};return S(()=>{(A.value?.querySelector(`.bookmark-grid`))?.addEventListener(`scroll`,G)}),l(()=>{(A.value?.querySelector(`.bookmark-grid`))?.removeEventListener(`scroll`,G)}),(e,i)=>(u(),r(`div`,{ref_key:`containerRef`,ref:A,class:`bookmark-wrapper`},[t(`div`,M,[t(`div`,{class:`bookmark-grid`,style:a(K.value)},[t(`div`,N,[t(`div`,{class:`bookmark-icon-wrapper add-btn`,onClick:he},[t(`img`,{src:g(ee),class:`action-icon`,alt:`新增`},null,8,ne)]),i[0]||=t(`span`,{class:`bookmark-name`},`新增`,-1)]),(u(!0),r(D,null,f(me.value,(e,i)=>(u(),r(`div`,{key:e.id,class:v([`bookmark-item`,{dragging:q.value===i,"drag-over":J.value===i}]),draggable:`true`,onDragstart:e=>le(e,i),onDragover:e=>ue(e,i),onDragleave:de,onDragend:Y,onDrop:e=>fe(e,i)},[e.description?(u(),E(g(b),{key:0,trigger:`hover`},{trigger:c(()=>[t(`div`,F,[t(`div`,{class:`bookmark-icon-wrapper`,onClick:t=>X(e.url),onContextmenu:t=>Z(t,e)},[e.customIcon?(u(),r(`img`,{key:0,src:e.customIcon,class:`bookmark-favicon`,alt:``},null,8,L)):(u(),r(`div`,R,s(e.name.charAt(0)),1))],40,I),t(`span`,re,s(e.name),1)])]),default:c(()=>[n(` `+s(e.description),1)]),_:2},1024)):(u(),r(`div`,ie,[t(`div`,{class:`bookmark-icon-wrapper`,onClick:t=>X(e.url),onContextmenu:t=>Z(t,e)},[e.customIcon?(u(),r(`img`,{key:0,src:e.customIcon,class:`bookmark-favicon`,alt:``},null,8,ae)):(u(),r(`div`,B,s(e.name.charAt(0)),1))],40,z),t(`span`,V,s(e.name),1)]))],42,P))),128))],4)]),d(g(x),{placement:`bottom-start`,trigger:`manual`,x:O.value,y:k.value,options:H,show:w.value,onSelect:ve,onClickoutside:Q},{default:c(()=>[...i[1]||=[t(`span`,null,null,-1)]]),_:1},8,[`x`,`y`,`show`]),t(`div`,oe,[t(`div`,se,[(u(!0),r(D,null,f(y.value,e=>(u(),r(`button`,{key:e,class:v([`group-tab menu-item`,{active:C.value===e}]),onClick:t=>pe(e)},s(e),11,ce))),128))])])],512))}}),[[`__scopeId`,`data-v-7a200c3e`]]),U={class:`icon-input-container`},W={class:`icon-mode-tabs`},G={key:0,class:`icon-url-input`},K={key:0,class:`icon-preview`},q=[`src`],J={key:1,class:`icon-preview`},le=[`src`],ue=w(C({__name:`BookmarkModal`,props:{show:{type:Boolean},mode:{},bookmark:{}},emits:[`update:show`,`save`,`cancel`],setup(e,{emit:a}){let s=e,l=a,f=_(s.show);o(()=>s.show,e=>{f.value=e});let p=e=>{f.value=e,l(`update:show`,e)},g=_(null),v=_({name:``,url:``,group:``,icon:``,description:``}),y=_(`none`),b=_(null),x=m(()=>s.mode===`add`?`新增书签`:`编辑书签`);o(()=>s.show,e=>{e&&(s.mode===`edit`&&s.bookmark?(v.value.name=s.bookmark.name||``,v.value.url=s.bookmark.url||``,v.value.group=s.bookmark.group||``,v.value.icon=s.bookmark.customIcon||``,v.value.description=s.bookmark.description||``,y.value=s.bookmark.customIcon?`upload`:`none`):(v.value.name=``,v.value.url=``,v.value.group=``,v.value.icon=``,v.value.description=``,y.value=`none`))});let S=()=>{v.value.icon=``,y.value=`none`},C=()=>{y.value=`url`},w=()=>{b.value?.click()},T=e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{v.value.icon=e.target?.result,y.value=`upload`},e.readAsDataURL(t)}},D=()=>{l(`cancel`),p(!1)},O=()=>{let e={name:v.value.name,url:v.value.url,group:v.value.group||void 0,customIcon:v.value.icon||void 0,description:v.value.description||void 0};s.mode===`edit`&&s.bookmark?.id&&(e.id=s.bookmark.id),l(`save`,e),p(!1)};return(e,a)=>{let o=i(`n-input`),s=i(`n-form-item`),l=i(`n-button`),m=i(`n-form`),_=i(`n-space`),k=i(`n-modal`);return u(),E(k,{show:f.value,preset:`card`,title:x.value,style:{width:`420px`},"onUpdate:show":p},{footer:c(()=>[d(_,{reverse:``},{default:c(()=>[d(l,{type:`primary`,onClick:O},{default:c(()=>[...a[8]||=[n(`保存`,-1)]]),_:1}),d(l,{onClick:D},{default:c(()=>[...a[9]||=[n(`取消`,-1)]]),_:1})]),_:1})]),default:c(()=>[d(m,{ref_key:`formRef`,ref:g,model:v.value},{default:c(()=>[d(s,{label:`名称`,path:`name`,rule:{required:!0,message:`请输入名称`}},{default:c(()=>[d(o,{value:v.value.name,"onUpdate:value":a[0]||=e=>v.value.name=e,placeholder:`输入名称`},null,8,[`value`])]),_:1}),d(s,{label:`网址`,path:`url`,rule:{required:!0,message:`请输入网址`}},{default:c(()=>[d(o,{value:v.value.url,"onUpdate:value":a[1]||=e=>v.value.url=e,placeholder:`https://...`},null,8,[`value`])]),_:1}),d(s,{label:`分组`,path:`group`},{default:c(()=>[d(o,{value:v.value.group,"onUpdate:value":a[2]||=e=>v.value.group=e,placeholder:`输入分组名称（可选）`},null,8,[`value`])]),_:1}),d(s,{label:`描述`,path:`description`},{default:c(()=>[d(o,{value:v.value.description,"onUpdate:value":a[3]||=e=>v.value.description=e,type:`textarea`,placeholder:`输入描述（可选）`,rows:2},null,8,[`value`])]),_:1}),d(s,{label:`图标`,path:`icon`},{default:c(()=>[t(`div`,U,[t(`div`,W,[d(l,{size:`small`,type:y.value===`none`?`primary`:`default`,onClick:S},{default:c(()=>[...a[5]||=[n(` 不使用 `,-1)]]),_:1},8,[`type`]),d(l,{size:`small`,type:y.value===`url`?`primary`:`default`,onClick:C},{default:c(()=>[...a[6]||=[n(` 在线图片 `,-1)]]),_:1},8,[`type`]),d(l,{size:`small`,type:y.value===`upload`?`primary`:`default`,onClick:w},{default:c(()=>[...a[7]||=[n(` 上传图片 `,-1)]]),_:1},8,[`type`]),t(`input`,{ref_key:`iconFileInput`,ref:b,type:`file`,accept:`image/*`,style:{display:`none`},onChange:T},null,544)]),y.value===`url`?(u(),r(`div`,G,[d(o,{value:v.value.icon,"onUpdate:value":a[4]||=e=>v.value.icon=e,placeholder:`输入图片URL（如 https://...）`},null,8,[`value`]),v.value.icon?(u(),r(`div`,K,[t(`img`,{src:v.value.icon,alt:`预览`,onError:S},null,40,q)])):h(``,!0)])):v.value.icon?(u(),r(`div`,J,[t(`img`,{src:v.value.icon,alt:`预览`,onError:S},null,40,le)])):h(``,!0)])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`show`,`title`])}}}),[[`__scopeId`,`data-v-af5a178b`]]),de=``+new URL(`baidu-CoUrQuuv.svg`,import.meta.url).href,Y=`data:image/svg+xml,%3csvg%20width='100'%20height='100'%20viewBox='0%200%20100%20100'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.2739%2083.9026C24.8696%2084.9049%2027.8614%2087.6111%2034.3437%2084.6042C37.8342%2082.6999%2040.128%2081.2967%2041.3247%2080.3947L40.826%2080.6953L40.9258%2054.3354L40.7263%2017.9527C40.7263%2017.9527%2040.0282%2012.7409%2036.1388%2010.2352C31.8505%206.82742%2024.8696%202.01648%2023.972%201.7158C23.1742%201.0142%2020.1824%20-0.0883057%2018.2875%203.62013L18.3873%2076.6862C18.3873%2076.6862%2018.487%2077.4881%2018.6864%2078.791C19.8832%2080.6953%2021.4788%2082.9004%2023.2739%2083.9026Z'%20fill='url(%23paint0_linear_102_2)'/%3e%3cpath%20d='M70.2458%2062.7546L41.3247%2080.2944C40.0282%2081.1965%2037.8342%2082.5997%2034.244%2084.504C27.8614%2087.5109%2024.8696%2084.8047%2023.1742%2083.8024C21.3791%2082.8001%2019.7835%2080.5951%2018.5867%2078.5906C19.1851%2081.397%2020.5813%2086.4083%2024.1715%2089.9163C28.759%2094.627%2034.3437%20100.741%2049.4027%2098.5359C52.7934%2097.5336%2056.4833%2095.5291%2063.0654%2091.1191C68.0518%2087.8115%2073.1379%2086.1077%2077.3265%2080.2944C82.0137%2067.3651%2072.739%2063.5564%2070.2458%2062.7546Z'%20fill='url(%23paint1_linear_102_2)'/%3e%3cpath%20d='M80.8169%2054.0347C77.6256%2047.9208%2077.127%2045.3149%2067.1542%2039.5017C56.9819%2034.2898%2055.486%2033.488%2055.486%2033.488C55.486%2033.488%2052.9928%2031.3832%2050.5993%2031.5837C48.3056%2032.586%2046.8097%2033.9891%2048.5051%2038.3992C50.7988%2044.7135%2053.4915%2051.6293%2053.4915%2051.6293C53.4915%2051.6293%2054.4887%2056.7409%2058.5776%2058.4447C65.6583%2060.75%2070.2457%2062.6543%2070.2457%2062.6543L70.146%2062.7545C72.6392%2063.5564%2081.9139%2067.2648%2077.3264%2080.3946C78.8223%2078.3901%2080.1188%2075.7842%2081.3155%2072.5769C82.8115%2066.9641%2083.5096%2064.1577%2080.8169%2054.0347Z'%20fill='url(%23paint2_linear_102_2)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_2'%20x1='10.1209'%20y1='6.26564'%20x2='45.1332'%20y2='79.3835'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%233BBDF5'/%3e%3cstop%20offset='1'%20stop-color='%231B45D9'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_2'%20x1='18.7266'%20y1='80.9445'%20x2='78.701'%20y2='80.9445'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%235AD9FE'/%3e%3cstop%20offset='0.51'%20stop-color='%2343AAE1'/%3e%3cstop%20offset='1'%20stop-color='%23144AD5'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_2'%20x1='55.3044'%20y1='46.4248'%20x2='82.9308'%20y2='67.615'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%233DC0FE'/%3e%3cstop%20offset='1'%20stop-color='%2361DDD5'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e`,fe=`data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1639468659890'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='3509'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='32'%20height='32'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M214.101333%20512c0-32.512%205.546667-63.701333%2015.36-92.928L57.173333%20290.218667A491.861333%20491.861333%200%200%200%204.693333%20512c0%2079.701333%2018.858667%20154.88%2052.394667%20221.610667l172.202667-129.066667A290.56%20290.56%200%200%201%20214.101333%20512'%20fill='%23FBBC05'%20p-id='3510'%3e%3c/path%3e%3cpath%20d='M516.693333%20216.192c72.106667%200%20137.258667%2025.002667%20188.458667%2065.96266699L854.101333%20136.533333C763.349333%2059.178667%20646.997333%2011.392%20516.693333%2011.392c-202.325333%200-376.234667%20113.28-459.52%20278.826667l172.373334%20128.853333c39.68-118.016%20152.832-202.88%20287.146666-202.88'%20fill='%23EA4335'%20p-id='3511'%3e%3c/path%3e%3cpath%20d='M516.693333%20807.808c-134.357333%200-247.509333-84.864-287.232-202.88l-172.288%20128.853333c83.242667%20165.546667%20257.152%20278.826667%20459.52%20278.826667%20124.842667%200%20244.053333-43.392%20333.568-124.757333l-163.584-123.818667c-46.122667%2028.458667-104.234667%2043.776-170.026666%2043.776'%20fill='%2334A853'%20p-id='3512'%3e%3c/path%3e%3cpath%20d='M1005.397333%20512c0-29.568-4.693333-61.44-11.64799999-91.008H516.650667V614.4h274.602666c-13.696%2065.962667-51.072%20116.650667-104.533333%20149.632l163.541333%20123.818667c93.994667-85.418667%20155.136-212.650667%20155.136-375.850667'%20fill='%234285F4'%20p-id='3513'%3e%3c/path%3e%3c/svg%3e`,pe=`data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%3e%3cdefs%3e%3crect%20id='path_0'%20x='0'%20y='0'%20width='30'%20height='30'%20/%3e%3c/defs%3e%3cg%20opacity='1'%20transform='translate(0%200)%20rotate(0%2015%2015)'%3e%3cmask%20id='bg-mask'%20fill='white'%3e%3cuse%20xlink:href='%23path_0'%3e%3c/use%3e%3c/mask%3e%3cg%20mask='url(%23bg-mask)'%20%3e%3cpath%20id='分组%201'%20fill-rule='evenodd'%20style='fill:%23FE630D'%20transform='translate(1.1278160332207605%200.937539137393511)%20rotate(0%2013.860638757344386%2014.062473374441806)'%20opacity='1'%20d='M22.2231%2018.9455C22.8331%2017.9155%2022.8631%2016.6455%2022.2831%2015.6055C22.0331%2015.1755%2021.7131%2014.7955%2021.3231%2014.4855C20.7331%2014.0055%2020.0731%2013.6155%2019.3631%2013.3155C17.8931%2012.7255%2016.3631%2012.2555%2014.8131%2011.9255C14.0331%2011.7755%2013.2731%2011.5255%2012.5531%2011.1955C12.2231%2011.0355%2011.9331%2010.7955%2011.7231%2010.4955C11.5931%2010.2755%2011.5731%2010.0155%2011.6631%209.78552C11.8231%209.50552%2012.0831%209.28552%2012.3831%209.16552C12.9531%208.96552%2013.5631%208.87552%2014.1631%208.90552C15.6831%208.94552%2017.2031%209.15552%2018.6731%209.53552C19.8831%209.82552%2021.0631%2010.1955%2022.2231%2010.6555L22.0631%207.70552C21.4531%207.48552%2020.8331%207.29552%2020.2031%207.12552C18.6931%206.73552%2017.1631%206.42552%2015.6131%206.21552C14.1231%205.99552%2012.6131%205.93552%2011.1031%206.02552C10.1531%206.09552%209.21314%206.29552%208.31314%206.63552C7.53314%206.92552%206.82314%207.39552%206.23314%207.98552C5.66314%208.56552%205.28314%209.31552%205.16314%2010.1155C5.06314%2010.6655%205.11314%2011.2355%205.32314%2011.7455C5.61314%2012.3555%206.07314%2012.8755%206.64314%2013.2355C7.68314%2013.8755%208.82314%2014.3655%2010.0131%2014.6655C11.1331%2014.9855%2012.2531%2015.2155%2013.3931%2015.4555C13.9231%2015.5755%2014.4431%2015.7255%2014.9531%2015.9055C15.3831%2016.0655%2015.7931%2016.2855%2016.1631%2016.5655C16.3431%2016.6955%2016.4731%2016.8855%2016.5431%2017.1055C16.5631%2017.2955%2016.4931%2017.4855%2016.3431%2017.6155C16.0831%2017.8155%2015.7831%2017.9555%2015.4631%2018.0255C14.8731%2018.1955%2014.2531%2018.2955%2013.6431%2018.3255C12.0131%2018.4055%2010.3931%2018.2055%208.84314%2017.7455C7.70314%2017.4255%206.59314%2017.0155%205.52314%2016.5055C5.58314%2017.5155%205.64314%2018.5255%205.70314%2019.5355C6.30314%2019.8055%206.91314%2020.0255%207.53314%2020.2255C9.29314%2020.8355%2011.1131%2021.2555%2012.9531%2021.4755C14.1831%2021.5955%2015.4131%2021.5955%2016.6431%2021.4755C17.7931%2021.3955%2018.9131%2021.1355%2019.9831%2020.7155C20.8931%2020.3655%2021.6731%2019.7455%2022.2231%2018.9455Z%20M17.65%2025.22C17.27%2025.34%2016.87%2025.46%2016.5%2025.55C12.5%2026.43%208.32%2025.22%205.42%2022.33C4.87%2021.79%204.38%2021.2%203.95%2020.56C1.22%2016.51%201.22%2011.22%203.95%207.17C4.39%206.54%204.88%205.95%205.42%205.4C6.51%204.31%207.8%203.44%209.22%202.84C10.68%202.21%2012.25%201.89%2013.84%201.9C17.03%201.9%2020.08%203.18%2022.31%205.44C25.65%208.78%2026.72%2013.77%2025.03%2018.19C24.65%2019.19%2024.14%2020.13%2023.5%2020.99C23.35%2021.18%2023.29%2021.42%2023.32%2021.66C23.36%2021.89%2023.48%2022.11%2023.68%2022.25C23.86%2022.43%2024.12%2022.51%2024.38%2022.49C24.64%2022.46%2024.87%2022.32%2025.02%2022.11C27.51%2018.72%2028.33%2014.39%2027.26%2010.33C26.19%206.27%2023.34%202.91%2019.51%201.19C18.94%200.92%2018.34%200.71%2017.74%200.54C13.55%20-0.66%209.04%200.17%205.56%202.78C2.07%205.39%200.02%209.49%200%2013.84C-0.01%2018.3%202.12%2022.48%205.73%2025.1C9.34%2027.71%2013.99%2028.42%2018.21%2027.02C18.48%2026.93%2018.69%2026.73%2018.8%2026.47C18.91%2026.21%2018.89%2025.92%2018.76%2025.67C18.57%2025.25%2018.08%2025.06%2017.65%2025.22Z%20M23.7334%2023.7375L23.7634%2023.7775C22.7234%2024.8175%2021.5334%2025.6875%2020.2134%2026.3575C20.0034%2026.4675%2019.8334%2026.6675%2019.7634%2026.9075C19.6934%2027.1475%2019.7134%2027.4075%2019.8334%2027.6275C20.0734%2028.0675%2020.6234%2028.2475%2021.0734%2028.0275C22.6534%2027.2075%2024.0834%2026.1375%2025.3034%2024.8375C25.4834%2024.6575%2025.5834%2024.4175%2025.5734%2024.1575C25.5534%2023.9075%2025.4334%2023.6675%2025.2334%2023.5075L24.4834%2022.8875C24.2634%2023.1775%2023.9934%2023.4675%2023.7334%2023.7375Z%20'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e`,me={class:`engine-tags`},he=[`onClick`],ge=[`src`],_e={class:`engine-label`},X=w(C({__name:`EngineSelector`,props:{modelValue:{}},emits:[`update:modelValue`],setup(e,{emit:n}){let i=n,a=[{name:`baidu`,label:`百度`,icon:de},{name:`bing`,label:`必应`,icon:Y},{name:`google`,label:`谷歌`,icon:fe},{name:`sogou`,label:`搜狗`,icon:pe}],o=e=>{i(`update:modelValue`,e)};return(n,i)=>(u(),r(`div`,me,[(u(),r(D,null,f(a,n=>t(`div`,{key:n.name,class:v([`engine-tag`,{active:e.modelValue===n.name}]),onClick:e=>o(n.name)},[t(`img`,{src:n.icon,class:`engine-icon`,alt:``},null,8,ge),t(`span`,_e,s(n.label),1)],10,he)),64))]))}}),[[`__scopeId`,`data-v-e39b553d`]]),Z=_(null);function Q(){let e=_([]),t=()=>new Promise((e,t)=>{let n=indexedDB.open(`BookmarkDB`,2);n.onerror=()=>t(n.error),n.onsuccess=()=>{Z.value=n.result,e(n.result)},n.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(`bookmarks`)||t.createObjectStore(`bookmarks`,{keyPath:`id`,autoIncrement:!0}),t.objectStoreNames.contains(`settings`)||t.createObjectStore(`settings`,{keyPath:`key`})}}),n=async()=>{if(!Z.value)return;let t=Z.value.transaction(`bookmarks`,`readonly`).objectStore(`bookmarks`).getAll();t.onsuccess=()=>{e.value=t.result}},r=t=>new Promise((n,r)=>{if(!Z.value){r(Error(`Database not initialized`));return}let i=Z.value.transaction(`bookmarks`,`readwrite`).objectStore(`bookmarks`).add(t);i.onsuccess=()=>{let r=i.result,a={...t,id:r};e.value=[...e.value,a],n(r)},i.onerror=()=>r(i.error)});return{db:Z,bookmarks:e,initDB:t,loadBookmarks:n,addBookmark:r,updateBookmark:(t,n)=>{if(!Z.value)return;let r=Z.value.transaction(`bookmarks`,`readwrite`);r.objectStore(`bookmarks`).put({...n,id:t}),r.oncomplete=()=>{e.value=e.value.map(e=>e.id===t?{...n,id:t}:e)}},deleteBookmark:t=>{if(!Z.value)return;let n=Z.value.transaction(`bookmarks`,`readwrite`);n.objectStore(`bookmarks`).delete(t),n.oncomplete=()=>{e.value=e.value.filter(e=>e.id!==t)}},reorderBookmarks:t=>{if(!Z.value)return;let n=Z.value.transaction(`bookmarks`,`readwrite`).objectStore(`bookmarks`);t.forEach(e=>{e.id!==void 0&&n.put(e)}),e.value=t},exportData:()=>{let t={version:1,bookmarks:e.value},n=new Blob([JSON.stringify(t,null,2)],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`bookmarks-backup-${new Date().toISOString().split(`T`)[0]}.json`,i.click(),URL.revokeObjectURL(r)},importData:async t=>{if(!t.bookmarks||!Array.isArray(t.bookmarks))return 0;let n=new Set(e.value.map(e=>e.name.toLowerCase())),i=0;for(let e of t.bookmarks)if(!n.has(e.name.toLowerCase())){let{id:t,...a}=e;await r(a),n.add(e.name.toLowerCase()),i++}return i}}}function ve(){let e=_(``),t=_(`baidu`),n={baidu:`https://www.baidu.com/s?wd=`,bing:`https://www.bing.com/search?q=`,google:`https://www.google.com/search?q=`,sogou:`https://www.sogou.com/web?query=`};return{searchQuery:e,currentEngine:t,search:()=>{if(!e.value.trim())return;let r=encodeURIComponent(e.value),i=`${n[t.value]}${r}`;window.open(i,`_blank`)},openBookmark:e=>{window.open(e,`_blank`)}}}var $=_(null);function ye(){let e=_(`baidu`);return{currentEngine:e,initDB:e=>{$.value=e},loadSettings:async()=>{if(!$.value)return;let t=$.value.transaction(`settings`,`readonly`).objectStore(`settings`).get(`searchEngine`);t.onsuccess=()=>{t.result&&(e.value=t.result.value)}},saveSettings:(e,t)=>{$.value&&$.value.transaction(`settings`,`readwrite`).objectStore(`settings`).put({key:e,value:t})}}}var be={class:`search-page`},xe={class:`search-container`},Se={class:`search-bar`},Ce={class:`search-box`},we=[`src`],Te=w(C({__name:`SearchPage`,setup(e){let{db:n,bookmarks:i,initDB:a,loadBookmarks:s,addBookmark:c,updateBookmark:l,deleteBookmark:f,reorderBookmarks:h,exportData:v,importData:b}=Q(),{searchQuery:x,currentEngine:C,search:w,openBookmark:E}=ve(),{initDB:D,loadSettings:ee,saveSettings:te}=ye(),j=_(!1),M=_(`add`),N=_(null),ne=m(()=>{let e=i.value.map(e=>e.group).filter(e=>e!==void 0);return[`全部`,...new Set(e)]}),P=_(`全部`),F=m(()=>P.value===`全部`?i.value:i.value.filter(e=>e.group===P.value)),I=()=>{M.value=`add`,N.value=null,j.value=!0},L=e=>{M.value=`edit`,N.value=e,j.value=!0},R=e=>{M.value===`add`?c(e):e.id&&l(e.id,e)},re=e=>{P.value=e},ie=e=>{h(e)};o(C,e=>{te(`searchEngine`,e)});let z=_(null),ae=()=>{z.value?.click()},B=e=>{let t=e.target,n=t.files?.[0];if(!n)return;let r=new FileReader;r.onload=async e=>{try{let t=await b(JSON.parse(e.target?.result));t!==void 0&&t>0?alert(`导入成功！共导入 ${t} 个书签`):t===0&&alert(`没有新书签需要导入`)}catch(e){alert(`导入失败，请检查文件格式是否正确`),console.error(e)}t.value=``},r.readAsText(n)},V=()=>{v()};return S(async()=>{await a(),D(n.value),await ee(),await s(),T().registerImportExport(ae,V,B)}),(e,n)=>(u(),r(`div`,be,[t(`div`,xe,[t(`div`,Se,[d(X,{modelValue:g(C),"onUpdate:modelValue":n[0]||=e=>k(C)?C.value=e:null},null,8,[`modelValue`]),t(`div`,Ce,[p(t(`input`,{"onUpdate:modelValue":n[1]||=e=>k(x)?x.value=e:null,type:`text`,placeholder:`输入搜索内容...`,onKeyup:n[2]||=y((...e)=>g(w)&&g(w)(...e),[`enter`])},null,544),[[O,g(x)]]),t(`button`,{class:`search-btn`,onClick:n[3]||=(...e)=>g(w)&&g(w)(...e)},[t(`img`,{src:g(A),alt:`搜索`},null,8,we)])])]),d(H,{bookmarks:F.value,groups:ne.value,"current-group":P.value,onAdd:I,onEdit:L,onDelete:g(f),onOpen:g(E),onReorder:ie,onSwitchGroup:re},null,8,[`bookmarks`,`groups`,`current-group`,`onDelete`,`onOpen`])]),d(ue,{show:j.value,"onUpdate:show":n[4]||=e=>j.value=e,mode:M.value,bookmark:N.value,onSave:R},null,8,[`show`,`mode`,`bookmark`]),t(`input`,{ref_key:`importFileInput`,ref:z,type:`file`,accept:`.json`,style:{display:`none`},onChange:B},null,544)]))}}),[[`__scopeId`,`data-v-c0c0aef8`]]);export{Te as default};