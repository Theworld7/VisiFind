import{A as e,B as t,D as n,F as r,H as i,I as a,J as o,K as s,L as c,M as l,N as u,O as d,P as f,Q as p,R as m,U as h,V as g,W as _,X as v,Y as y,et as b,j as x,n as S,nt as C,q as w,r as T,rt as E,t as D,tt as O,v as k,y as A,z as j}from"./index-PHICZ4kr.js";var M=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21%2038C30.3888%2038%2038%2030.3888%2038%2021C38%2011.6112%2030.3888%204%2021%204C11.6112%204%204%2011.6112%204%2021C4%2030.3888%2011.6112%2038%2021%2038Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M26.657%2014.3431C25.2093%2012.8954%2023.2093%2012%2021.0001%2012C18.791%2012%2016.791%2012.8954%2015.3433%2014.3431'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.2216%2033.2217L41.7069%2041.707'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e`,ee=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M25%2040H7C5.34315%2040%204%2038.6569%204%2037V11C4%209.34315%205.34315%208%207%208H41C42.6569%208%2044%209.34315%2044%2011V24.9412'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2011C4%209.34315%205.34315%208%207%208H41C42.6569%208%2044%209.34315%2044%2011V20H4V11Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'/%3e%3cpath%20d='M32%2035H44'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38%2029V41'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20r='2'%20transform='matrix(-1.31134e-07%20-1%20-1%201.31134e-07%2010%2014)'%20fill='%23000'/%3e%3ccircle%20r='2'%20transform='matrix(-1.31134e-07%20-1%20-1%201.31134e-07%2016%2014)'%20fill='%23000'/%3e%3c/svg%3e`,te=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M40%2033V42C40%2043.1046%2039.1046%2044%2038%2044H31.5'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M40%2016V6C40%204.89543%2039.1046%204%2038%204H10C8.89543%204%208%204.89543%208%206V42C8%2043.1046%208.89543%2044%2010%2044H16'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16%2016H30'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3cpath%20d='M23%2044L40%2023'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3cpath%20d='M16%2024H24'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'/%3e%3c/svg%3e`,N=`data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%2010V44H39V10H9Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M20%2020V33'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M28%2020V33'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2010H44'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16%2010L19.289%204H28.7771L32%2010H16Z'%20fill='none'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3c/svg%3e`,P={class:`bookmark-grid-container`},F={class:`bookmark-item`},ne=[`src`],I=[`onDragstart`,`onDragover`,`onDrop`],L={class:`bookmark-content`},R=[`onClick`,`onContextmenu`],z=[`src`],re={key:1,class:`bookmark-icon`},B={class:`bookmark-name`},ie={key:1,class:`bookmark-content`},V=[`onClick`,`onContextmenu`],ae=[`src`],H={key:1,class:`bookmark-icon`},U={class:`bookmark-name`},oe={class:`group-tabs`},se={class:`group-tabs-inner glass-white menu-container`},ce=[`onClick`],W=S(j({__name:`BookmarkGrid`,props:{bookmarks:{},groups:{},currentGroup:{}},emits:[`add`,`edit`,`delete`,`open`,`reorder`,`switch-group`],setup(e,{emit:n}){let r=e,s=n,d=l(()=>{if(r.groups&&r.groups.length>0)return r.groups;let e=new Set;return e.add(`默认`),r.bookmarks.forEach(t=>{t.group&&t.group.trim()&&e.add(t.group)}),Array.from(e)}),v=p(r.currentGroup||`默认`),y=p(!1),S=p(null),w=p(0),T=p(0),D=p(null),j=[{label:`编辑`,key:`edit`,icon:()=>t(`img`,{src:te,style:{width:`16px`,height:`16px`}})},{label:`删除`,key:`delete`,icon:()=>t(`img`,{src:N,style:{width:`16px`,height:`16px`}}),props:{class:`danger`}}],M=p(!0),W=p(!0),G=()=>{let e=D.value?.querySelector(`.bookmark-grid`);e&&(M.value=e.scrollTop===0,W.value=e.scrollTop+e.clientHeight>=e.scrollHeight-1)},K=l(()=>{let e=[];return M.value||e.push(`linear-gradient(to bottom, transparent 0%, black 12px)`),W.value||e.push(`linear-gradient(to top, transparent 0%, black 12px)`),e.length===0?{}:{maskImage:e.join(`, `),WebkitMaskImage:e.join(`, `),maskComposite:`intersect`,WebkitMaskComposite:`intersect`}}),q=p(null),J=p(null),le=(e,t)=>{q.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t.toString()))},ue=(e,t)=>{e.preventDefault(),q.value!==null&&q.value!==t&&(J.value=t)},de=()=>{J.value=null},Y=()=>{q.value=null,J.value=null},fe=(e,t)=>{if(e.preventDefault(),q.value===null||q.value===t){Y();return}let n=[...r.bookmarks],i=n.filter(e=>v.value===`默认`?!e.group||!e.group.trim():e.group===v.value),a=i[q.value];if(!a){Y();return}i.splice(q.value,1),i.splice(t,0,a);let o=0;n.forEach((e,t)=>{(v.value===`默认`?!e.group||!e.group.trim():e.group===v.value)&&i[o]&&(n[t]=i[o],o++)}),s(`reorder`,n),Y()},pe=e=>{v.value=e,s(`switch-group`,e)},me=l(()=>v.value===`默认`||v.value===`全部`?r.bookmarks.filter(e=>!e.group||!e.group.trim()):r.bookmarks.filter(e=>e.group===v.value)),he=()=>{s(`add`)},ge=e=>{s(`edit`,e),Q()},_e=e=>{s(`delete`,e),Q()},X=e=>{s(`open`,e)},Z=(e,t)=>{e.preventDefault(),e.stopPropagation(),S.value=t,w.value=e.clientX,T.value=e.clientY,y.value=!0},Q=()=>{y.value=!1,S.value=null},ve=e=>{let t=S.value;t&&(e===`edit`?ge(t):e===`delete`&&t.id&&_e(t.id),Q())};return g(()=>{(D.value?.querySelector(`.bookmark-grid`))?.addEventListener(`scroll`,G)}),i(()=>{(D.value?.querySelector(`.bookmark-grid`))?.removeEventListener(`scroll`,G)}),(e,t)=>(h(),a(`div`,{ref_key:`containerRef`,ref:D,class:`bookmark-wrapper`},[u(`div`,P,[u(`div`,{class:`bookmark-grid`,style:C(K.value)},[u(`div`,F,[u(`div`,{class:`bookmark-icon-wrapper add-btn`,onClick:he},[u(`img`,{src:b(ee),class:`action-icon`,alt:`新增`},null,8,ne)]),t[0]||=u(`span`,{class:`bookmark-name`},`新增`,-1)]),(h(!0),a(x,null,_(me.value,(e,t)=>(h(),a(`div`,{key:e.id,class:O([`bookmark-item`,{dragging:q.value===t,"drag-over":J.value===t}]),draggable:`true`,onDragstart:e=>le(e,t),onDragover:e=>ue(e,t),onDragleave:de,onDragend:Y,onDrop:e=>fe(e,t)},[e.description?(h(),f(b(A),{key:0,trigger:`hover`},{trigger:o(()=>[u(`div`,L,[u(`div`,{class:`bookmark-icon-wrapper`,onClick:t=>X(e.url),onContextmenu:t=>Z(t,e)},[e.customIcon?(h(),a(`img`,{key:0,src:e.customIcon,class:`bookmark-favicon`,alt:``},null,8,z)):(h(),a(`div`,re,E(e.name.charAt(0)),1))],40,R),u(`span`,B,E(e.name),1)])]),default:o(()=>[c(` `+E(e.description),1)]),_:2},1024)):(h(),a(`div`,ie,[u(`div`,{class:`bookmark-icon-wrapper`,onClick:t=>X(e.url),onContextmenu:t=>Z(t,e)},[e.customIcon?(h(),a(`img`,{key:0,src:e.customIcon,class:`bookmark-favicon`,alt:``},null,8,ae)):(h(),a(`div`,H,E(e.name.charAt(0)),1))],40,V),u(`span`,U,E(e.name),1)]))],42,I))),128))],4)]),m(b(k),{placement:`bottom-start`,trigger:`manual`,x:w.value,y:T.value,options:j,show:y.value,onSelect:ve,onClickoutside:Q},{default:o(()=>[...t[1]||=[u(`span`,null,null,-1)]]),_:1},8,[`x`,`y`,`show`]),u(`div`,oe,[u(`div`,se,[(h(!0),a(x,null,_(d.value,e=>(h(),a(`button`,{key:e,class:O([`group-tab menu-item`,{active:v.value===e}]),onClick:t=>pe(e)},E(e),11,ce))),128))])])],512))}}),[[`__scopeId`,`data-v-7a200c3e`]]),G={class:`icon-input-container`},K={class:`icon-mode-tabs`},q={key:0,class:`icon-url-input`},J={key:0,class:`icon-preview`},le=[`src`],ue={key:1,class:`icon-preview`},de=[`src`],Y=S(j({__name:`BookmarkModal`,props:{show:{type:Boolean},mode:{},bookmark:{}},emits:[`update:show`,`save`,`cancel`],setup(e,{emit:t}){let n=e,i=t,d=p(n.show);w(()=>n.show,e=>{d.value=e});let g=e=>{d.value=e,i(`update:show`,e)},_=p(null),v=p({name:``,url:``,group:``,icon:``,description:``}),y=p(`none`),b=p(null),x=l(()=>n.mode===`add`?`新增书签`:`编辑书签`);w(()=>n.show,e=>{e&&(n.mode===`edit`&&n.bookmark?(v.value.name=n.bookmark.name||``,v.value.url=n.bookmark.url||``,v.value.group=n.bookmark.group||``,v.value.icon=n.bookmark.customIcon||``,v.value.description=n.bookmark.description||``,y.value=n.bookmark.customIcon?`upload`:`none`):(v.value.name=``,v.value.url=``,v.value.group=``,v.value.icon=``,v.value.description=``,y.value=`none`))});let S=()=>{v.value.icon=``,y.value=`none`},C=()=>{y.value=`url`},T=()=>{b.value?.click()},E=e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{v.value.icon=e.target?.result,y.value=`upload`},e.readAsDataURL(t)}},D=()=>{i(`cancel`),g(!1)},O=()=>{let e={name:v.value.name,url:v.value.url,group:v.value.group||void 0,customIcon:v.value.icon||void 0,description:v.value.description||void 0};n.mode===`edit`&&n.bookmark?.id&&(e.id=n.bookmark.id),i(`save`,e),g(!1)};return(e,t)=>{let n=s(`n-input`),i=s(`n-form-item`),l=s(`n-button`),p=s(`n-form`),w=s(`n-space`),k=s(`n-modal`);return h(),f(k,{show:d.value,preset:`card`,title:x.value,style:{width:`420px`},"onUpdate:show":g},{footer:o(()=>[m(w,{reverse:``},{default:o(()=>[m(l,{type:`primary`,onClick:O},{default:o(()=>[...t[8]||=[c(`保存`,-1)]]),_:1}),m(l,{onClick:D},{default:o(()=>[...t[9]||=[c(`取消`,-1)]]),_:1})]),_:1})]),default:o(()=>[m(p,{ref_key:`formRef`,ref:_,model:v.value},{default:o(()=>[m(i,{label:`名称`,path:`name`,rule:{required:!0,message:`请输入名称`}},{default:o(()=>[m(n,{value:v.value.name,"onUpdate:value":t[0]||=e=>v.value.name=e,placeholder:`输入名称`},null,8,[`value`])]),_:1}),m(i,{label:`网址`,path:`url`,rule:{required:!0,message:`请输入网址`}},{default:o(()=>[m(n,{value:v.value.url,"onUpdate:value":t[1]||=e=>v.value.url=e,placeholder:`https://...`},null,8,[`value`])]),_:1}),m(i,{label:`分组`,path:`group`},{default:o(()=>[m(n,{value:v.value.group,"onUpdate:value":t[2]||=e=>v.value.group=e,placeholder:`输入分组名称（可选）`},null,8,[`value`])]),_:1}),m(i,{label:`描述`,path:`description`},{default:o(()=>[m(n,{value:v.value.description,"onUpdate:value":t[3]||=e=>v.value.description=e,type:`textarea`,placeholder:`输入描述（可选）`,rows:2},null,8,[`value`])]),_:1}),m(i,{label:`图标`,path:`icon`},{default:o(()=>[u(`div`,G,[u(`div`,K,[m(l,{size:`small`,type:y.value===`none`?`primary`:`default`,onClick:S},{default:o(()=>[...t[5]||=[c(` 不使用 `,-1)]]),_:1},8,[`type`]),m(l,{size:`small`,type:y.value===`url`?`primary`:`default`,onClick:C},{default:o(()=>[...t[6]||=[c(` 在线图片 `,-1)]]),_:1},8,[`type`]),m(l,{size:`small`,type:y.value===`upload`?`primary`:`default`,onClick:T},{default:o(()=>[...t[7]||=[c(` 上传图片 `,-1)]]),_:1},8,[`type`]),u(`input`,{ref_key:`iconFileInput`,ref:b,type:`file`,accept:`image/*`,style:{display:`none`},onChange:E},null,544)]),y.value===`url`?(h(),a(`div`,q,[m(n,{value:v.value.icon,"onUpdate:value":t[4]||=e=>v.value.icon=e,placeholder:`输入图片URL（如 https://...）`},null,8,[`value`]),v.value.icon?(h(),a(`div`,J,[u(`img`,{src:v.value.icon,alt:`预览`,onError:S},null,40,le)])):r(``,!0)])):v.value.icon?(h(),a(`div`,ue,[u(`img`,{src:v.value.icon,alt:`预览`,onError:S},null,40,de)])):r(``,!0)])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`show`,`title`])}}}),[[`__scopeId`,`data-v-af5a178b`]]),fe=``+new URL(`baidu-CoUrQuuv.svg`,import.meta.url).href,pe=`data:image/svg+xml,%3csvg%20width='100'%20height='100'%20viewBox='0%200%20100%20100'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.2739%2083.9026C24.8696%2084.9049%2027.8614%2087.6111%2034.3437%2084.6042C37.8342%2082.6999%2040.128%2081.2967%2041.3247%2080.3947L40.826%2080.6953L40.9258%2054.3354L40.7263%2017.9527C40.7263%2017.9527%2040.0282%2012.7409%2036.1388%2010.2352C31.8505%206.82742%2024.8696%202.01648%2023.972%201.7158C23.1742%201.0142%2020.1824%20-0.0883057%2018.2875%203.62013L18.3873%2076.6862C18.3873%2076.6862%2018.487%2077.4881%2018.6864%2078.791C19.8832%2080.6953%2021.4788%2082.9004%2023.2739%2083.9026Z'%20fill='url(%23paint0_linear_102_2)'/%3e%3cpath%20d='M70.2458%2062.7546L41.3247%2080.2944C40.0282%2081.1965%2037.8342%2082.5997%2034.244%2084.504C27.8614%2087.5109%2024.8696%2084.8047%2023.1742%2083.8024C21.3791%2082.8001%2019.7835%2080.5951%2018.5867%2078.5906C19.1851%2081.397%2020.5813%2086.4083%2024.1715%2089.9163C28.759%2094.627%2034.3437%20100.741%2049.4027%2098.5359C52.7934%2097.5336%2056.4833%2095.5291%2063.0654%2091.1191C68.0518%2087.8115%2073.1379%2086.1077%2077.3265%2080.2944C82.0137%2067.3651%2072.739%2063.5564%2070.2458%2062.7546Z'%20fill='url(%23paint1_linear_102_2)'/%3e%3cpath%20d='M80.8169%2054.0347C77.6256%2047.9208%2077.127%2045.3149%2067.1542%2039.5017C56.9819%2034.2898%2055.486%2033.488%2055.486%2033.488C55.486%2033.488%2052.9928%2031.3832%2050.5993%2031.5837C48.3056%2032.586%2046.8097%2033.9891%2048.5051%2038.3992C50.7988%2044.7135%2053.4915%2051.6293%2053.4915%2051.6293C53.4915%2051.6293%2054.4887%2056.7409%2058.5776%2058.4447C65.6583%2060.75%2070.2457%2062.6543%2070.2457%2062.6543L70.146%2062.7545C72.6392%2063.5564%2081.9139%2067.2648%2077.3264%2080.3946C78.8223%2078.3901%2080.1188%2075.7842%2081.3155%2072.5769C82.8115%2066.9641%2083.5096%2064.1577%2080.8169%2054.0347Z'%20fill='url(%23paint2_linear_102_2)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_2'%20x1='10.1209'%20y1='6.26564'%20x2='45.1332'%20y2='79.3835'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%233BBDF5'/%3e%3cstop%20offset='1'%20stop-color='%231B45D9'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_2'%20x1='18.7266'%20y1='80.9445'%20x2='78.701'%20y2='80.9445'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%235AD9FE'/%3e%3cstop%20offset='0.51'%20stop-color='%2343AAE1'/%3e%3cstop%20offset='1'%20stop-color='%23144AD5'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_2'%20x1='55.3044'%20y1='46.4248'%20x2='82.9308'%20y2='67.615'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%233DC0FE'/%3e%3cstop%20offset='1'%20stop-color='%2361DDD5'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e`,me=`data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1639468659890'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='3509'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='32'%20height='32'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M214.101333%20512c0-32.512%205.546667-63.701333%2015.36-92.928L57.173333%20290.218667A491.861333%20491.861333%200%200%200%204.693333%20512c0%2079.701333%2018.858667%20154.88%2052.394667%20221.610667l172.202667-129.066667A290.56%20290.56%200%200%201%20214.101333%20512'%20fill='%23FBBC05'%20p-id='3510'%3e%3c/path%3e%3cpath%20d='M516.693333%20216.192c72.106667%200%20137.258667%2025.002667%20188.458667%2065.96266699L854.101333%20136.533333C763.349333%2059.178667%20646.997333%2011.392%20516.693333%2011.392c-202.325333%200-376.234667%20113.28-459.52%20278.826667l172.373334%20128.853333c39.68-118.016%20152.832-202.88%20287.146666-202.88'%20fill='%23EA4335'%20p-id='3511'%3e%3c/path%3e%3cpath%20d='M516.693333%20807.808c-134.357333%200-247.509333-84.864-287.232-202.88l-172.288%20128.853333c83.242667%20165.546667%20257.152%20278.826667%20459.52%20278.826667%20124.842667%200%20244.053333-43.392%20333.568-124.757333l-163.584-123.818667c-46.122667%2028.458667-104.234667%2043.776-170.026666%2043.776'%20fill='%2334A853'%20p-id='3512'%3e%3c/path%3e%3cpath%20d='M1005.397333%20512c0-29.568-4.693333-61.44-11.64799999-91.008H516.650667V614.4h274.602666c-13.696%2065.962667-51.072%20116.650667-104.533333%20149.632l163.541333%20123.818667c93.994667-85.418667%20155.136-212.650667%20155.136-375.850667'%20fill='%234285F4'%20p-id='3513'%3e%3c/path%3e%3c/svg%3e`,he=`data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%3e%3cdefs%3e%3crect%20id='path_0'%20x='0'%20y='0'%20width='30'%20height='30'%20/%3e%3c/defs%3e%3cg%20opacity='1'%20transform='translate(0%200)%20rotate(0%2015%2015)'%3e%3cmask%20id='bg-mask'%20fill='white'%3e%3cuse%20xlink:href='%23path_0'%3e%3c/use%3e%3c/mask%3e%3cg%20mask='url(%23bg-mask)'%20%3e%3cpath%20id='分组%201'%20fill-rule='evenodd'%20style='fill:%23FE630D'%20transform='translate(1.1278160332207605%200.937539137393511)%20rotate(0%2013.860638757344386%2014.062473374441806)'%20opacity='1'%20d='M22.2231%2018.9455C22.8331%2017.9155%2022.8631%2016.6455%2022.2831%2015.6055C22.0331%2015.1755%2021.7131%2014.7955%2021.3231%2014.4855C20.7331%2014.0055%2020.0731%2013.6155%2019.3631%2013.3155C17.8931%2012.7255%2016.3631%2012.2555%2014.8131%2011.9255C14.0331%2011.7755%2013.2731%2011.5255%2012.5531%2011.1955C12.2231%2011.0355%2011.9331%2010.7955%2011.7231%2010.4955C11.5931%2010.2755%2011.5731%2010.0155%2011.6631%209.78552C11.8231%209.50552%2012.0831%209.28552%2012.3831%209.16552C12.9531%208.96552%2013.5631%208.87552%2014.1631%208.90552C15.6831%208.94552%2017.2031%209.15552%2018.6731%209.53552C19.8831%209.82552%2021.0631%2010.1955%2022.2231%2010.6555L22.0631%207.70552C21.4531%207.48552%2020.8331%207.29552%2020.2031%207.12552C18.6931%206.73552%2017.1631%206.42552%2015.6131%206.21552C14.1231%205.99552%2012.6131%205.93552%2011.1031%206.02552C10.1531%206.09552%209.21314%206.29552%208.31314%206.63552C7.53314%206.92552%206.82314%207.39552%206.23314%207.98552C5.66314%208.56552%205.28314%209.31552%205.16314%2010.1155C5.06314%2010.6655%205.11314%2011.2355%205.32314%2011.7455C5.61314%2012.3555%206.07314%2012.8755%206.64314%2013.2355C7.68314%2013.8755%208.82314%2014.3655%2010.0131%2014.6655C11.1331%2014.9855%2012.2531%2015.2155%2013.3931%2015.4555C13.9231%2015.5755%2014.4431%2015.7255%2014.9531%2015.9055C15.3831%2016.0655%2015.7931%2016.2855%2016.1631%2016.5655C16.3431%2016.6955%2016.4731%2016.8855%2016.5431%2017.1055C16.5631%2017.2955%2016.4931%2017.4855%2016.3431%2017.6155C16.0831%2017.8155%2015.7831%2017.9555%2015.4631%2018.0255C14.8731%2018.1955%2014.2531%2018.2955%2013.6431%2018.3255C12.0131%2018.4055%2010.3931%2018.2055%208.84314%2017.7455C7.70314%2017.4255%206.59314%2017.0155%205.52314%2016.5055C5.58314%2017.5155%205.64314%2018.5255%205.70314%2019.5355C6.30314%2019.8055%206.91314%2020.0255%207.53314%2020.2255C9.29314%2020.8355%2011.1131%2021.2555%2012.9531%2021.4755C14.1831%2021.5955%2015.4131%2021.5955%2016.6431%2021.4755C17.7931%2021.3955%2018.9131%2021.1355%2019.9831%2020.7155C20.8931%2020.3655%2021.6731%2019.7455%2022.2231%2018.9455Z%20M17.65%2025.22C17.27%2025.34%2016.87%2025.46%2016.5%2025.55C12.5%2026.43%208.32%2025.22%205.42%2022.33C4.87%2021.79%204.38%2021.2%203.95%2020.56C1.22%2016.51%201.22%2011.22%203.95%207.17C4.39%206.54%204.88%205.95%205.42%205.4C6.51%204.31%207.8%203.44%209.22%202.84C10.68%202.21%2012.25%201.89%2013.84%201.9C17.03%201.9%2020.08%203.18%2022.31%205.44C25.65%208.78%2026.72%2013.77%2025.03%2018.19C24.65%2019.19%2024.14%2020.13%2023.5%2020.99C23.35%2021.18%2023.29%2021.42%2023.32%2021.66C23.36%2021.89%2023.48%2022.11%2023.68%2022.25C23.86%2022.43%2024.12%2022.51%2024.38%2022.49C24.64%2022.46%2024.87%2022.32%2025.02%2022.11C27.51%2018.72%2028.33%2014.39%2027.26%2010.33C26.19%206.27%2023.34%202.91%2019.51%201.19C18.94%200.92%2018.34%200.71%2017.74%200.54C13.55%20-0.66%209.04%200.17%205.56%202.78C2.07%205.39%200.02%209.49%200%2013.84C-0.01%2018.3%202.12%2022.48%205.73%2025.1C9.34%2027.71%2013.99%2028.42%2018.21%2027.02C18.48%2026.93%2018.69%2026.73%2018.8%2026.47C18.91%2026.21%2018.89%2025.92%2018.76%2025.67C18.57%2025.25%2018.08%2025.06%2017.65%2025.22Z%20M23.7334%2023.7375L23.7634%2023.7775C22.7234%2024.8175%2021.5334%2025.6875%2020.2134%2026.3575C20.0034%2026.4675%2019.8334%2026.6675%2019.7634%2026.9075C19.6934%2027.1475%2019.7134%2027.4075%2019.8334%2027.6275C20.0734%2028.0675%2020.6234%2028.2475%2021.0734%2028.0275C22.6534%2027.2075%2024.0834%2026.1375%2025.3034%2024.8375C25.4834%2024.6575%2025.5834%2024.4175%2025.5734%2024.1575C25.5534%2023.9075%2025.4334%2023.6675%2025.2334%2023.5075L24.4834%2022.8875C24.2634%2023.1775%2023.9934%2023.4675%2023.7334%2023.7375Z%20'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e`,ge={class:`engine-tags`},_e=[`onClick`],X=[`src`],Z={class:`engine-label`},Q=S(j({__name:`EngineSelector`,props:{modelValue:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=t,r=[{name:`baidu`,label:`百度`,icon:fe},{name:`bing`,label:`必应`,icon:pe},{name:`google`,label:`谷歌`,icon:me},{name:`sogou`,label:`搜狗`,icon:he}],i=e=>{n(`update:modelValue`,e)};return(t,n)=>(h(),a(`div`,ge,[(h(),a(x,null,_(r,t=>u(`div`,{key:t.name,class:O([`engine-tag`,{active:e.modelValue===t.name}]),onClick:e=>i(t.name)},[u(`img`,{src:t.icon,class:`engine-icon`,alt:``},null,8,X),u(`span`,Z,E(t.label),1)],10,_e)),64))]))}}),[[`__scopeId`,`data-v-e39b553d`]]);function ve(){let e=p(``),t=p(`baidu`),n={baidu:`https://www.baidu.com/s?wd=`,bing:`https://www.bing.com/search?q=`,google:`https://www.google.com/search?q=`,sogou:`https://www.sogou.com/web?query=`};return{searchQuery:e,currentEngine:t,search:()=>{if(!e.value.trim())return;let r=encodeURIComponent(e.value),i=`${n[t.value]}${r}`;window.open(i,`_blank`)},openBookmark:e=>{window.open(e,`_blank`)}}}var $=p(null);function ye(){let e=p(`baidu`);return{currentEngine:e,initDB:e=>{$.value=e},loadSettings:async()=>{if(!$.value)return;let t=$.value.transaction(`settings`,`readonly`).objectStore(`settings`).get(`searchEngine`);t.onsuccess=()=>{t.result&&(e.value=t.result.value)}},saveSettings:(e,t)=>{$.value&&$.value.transaction(`settings`,`readwrite`).objectStore(`settings`).put({key:e,value:t})}}}const be=n(`app`,()=>{let e=p(null),t=p(null),n=p(null);return{triggerImport:e,exportData:t,importData:n,registerImportExport:(r,i,a)=>{e.value=r,t.value=i,n.value=a},doTriggerImport:()=>{e.value?.()},doExportData:()=>{t.value?.()},doImportData:e=>{n.value?.(e)}}});var xe={class:`search-page`},Se={class:`search-container`},Ce={class:`search-bar`},we={class:`search-box`},Te=[`src`],Ee=S(j({__name:`SearchPage`,setup(t){let{db:n,bookmarks:r,initDB:i,loadBookmarks:o,addBookmark:s,updateBookmark:c,deleteBookmark:f,reorderBookmarks:_,exportData:x,importData:S}=D(),{searchQuery:C,currentEngine:E,search:O,openBookmark:k}=ve(),{initDB:A,loadSettings:j,saveSettings:ee}=ye(),{loadSettings:te}=T(),N=p(!1),P=p(`add`),F=p(null),ne=l(()=>{let e=r.value.map(e=>e.group).filter(e=>e!==void 0);return[`全部`,...new Set(e)]}),I=p(`全部`),L=l(()=>I.value===`全部`?r.value:r.value.filter(e=>e.group===I.value)),R=()=>{P.value=`add`,F.value=null,N.value=!0},z=e=>{P.value=`edit`,F.value=e,N.value=!0},re=e=>{P.value===`add`?s(e):e.id&&c(e.id,e)},B=e=>{I.value=e},ie=e=>{_(e)};w(E,e=>{ee(`searchEngine`,e)});let V=p(null),ae=()=>{V.value?.click()},H=e=>{let t=e.target,n=t.files?.[0];if(!n)return;let r=new FileReader;r.onload=async e=>{try{let t=JSON.parse(e.target?.result),n=await S(t);(t.backgroundSettings||t.foodLibrary)&&await te(),n!==void 0&&n>0?alert(`导入成功！共导入 ${n} 个项目`):n===0&&alert(`没有新数据需要导入`)}catch(e){alert(`导入失败，请检查文件格式是否正确`),console.error(e)}t.value=``},r.readAsText(n)},U=async()=>{await x()};return g(async()=>{await i(),A(n.value),await j(),await o(),be().registerImportExport(ae,U,H)}),(t,n)=>(h(),a(`div`,xe,[u(`div`,Se,[u(`div`,Ce,[m(Q,{modelValue:b(E),"onUpdate:modelValue":n[0]||=e=>v(E)?E.value=e:null},null,8,[`modelValue`]),u(`div`,we,[y(u(`input`,{"onUpdate:modelValue":n[1]||=e=>v(C)?C.value=e:null,type:`text`,placeholder:`输入搜索内容...`,onKeyup:n[2]||=e((...e)=>b(O)&&b(O)(...e),[`enter`])},null,544),[[d,b(C)]]),u(`button`,{class:`search-btn`,onClick:n[3]||=(...e)=>b(O)&&b(O)(...e)},[u(`img`,{src:b(M),alt:`搜索`},null,8,Te)])])]),m(W,{bookmarks:L.value,groups:ne.value,"current-group":I.value,onAdd:R,onEdit:z,onDelete:b(f),onOpen:b(k),onReorder:ie,onSwitchGroup:B},null,8,[`bookmarks`,`groups`,`current-group`,`onDelete`,`onOpen`])]),m(Y,{show:N.value,"onUpdate:show":n[4]||=e=>N.value=e,mode:P.value,bookmark:F.value,onSave:re},null,8,[`show`,`mode`,`bookmark`]),u(`input`,{ref_key:`importFileInput`,ref:V,type:`file`,accept:`.json`,style:{display:`none`},onChange:H},null,544)]))}}),[[`__scopeId`,`data-v-c7ada663`]]);export{Ee as default};